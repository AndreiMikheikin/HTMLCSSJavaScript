<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>drag&amp;drop</title>
    <style>
        img {
            cursor: grab;
        }

        img.dragging {
            cursor: grabbing;
        }
    </style>
</head>

<body style="min-height: 100vh">
    <img src="http://fe.it-academy.by/Sites/0000007/sax.jpg">
    <img src="http://fe.it-academy.by/Sites/0000007/Yin_and_Yang.png" width="100">
    <img src="http://fe.it-academy.by/Sites/0000007/Man-and-woman.png" width="150">
    <img src="http://fe.it-academy.by/Sites/0000007/No_smoking.png" style="padding-left: 50px">

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let zIndex = 1; // базовое значение z-index

            const images = document.querySelectorAll('img');
            const coordinates = [];

            const initializeImages = () => {
                // Сохранение координат всех изображений
                images.forEach(img => {
                    coordinates.push({ left: img.offsetLeft, top: img.offsetTop });
                });

                images.forEach((img, index) => {
                    // Установка абсолютного позиционирования с сохраненными координатами
                    const { left, top } = coordinates[index];
                    img.style.position = 'absolute';
                    img.style.left = `${left}px`;
                    img.style.top = `${top}px`;
                    img.style.zIndex = zIndex++;

                    img.addEventListener('mousedown', (e) => {
                        e.preventDefault();
                        const element = e.target;
                        const offsetX = e.clientX - element.getBoundingClientRect().left;
                        const offsetY = e.clientY - element.getBoundingClientRect().top;

                        // перенос кликнутого img наверх наращивая zIndex
                        element.style.zIndex = zIndex++;

                        const onMouseMove = (moveEvent) => {
                            element.style.left = `${moveEvent.clientX - offsetX}px`;
                            element.style.top = `${moveEvent.clientY - offsetY}px`;
                        };

                        const onMouseUp = () => {
                            document.removeEventListener('mousemove', onMouseMove);
                            document.removeEventListener('mouseup', onMouseUp);
                        };

                        document.addEventListener('mousemove', onMouseMove);
                        document.addEventListener('mouseup', onMouseUp);
                    });
                });
            };

            let imagesLoaded = 0;
            images.forEach(img => {
                if (img.complete) {
                    imagesLoaded++;
                    if (imagesLoaded === images.length) {
                        initializeImages();
                    }
                } else {
                    img.addEventListener('load', () => {
                        imagesLoaded++;
                        if (imagesLoaded === images.length) {
                            initializeImages();
                        }
                    });
                }
            });
        });
    </script>
</body>

</html>